//   
//   Project Name:        Kratos       
//   Last Modified by:    $Author:  $
//   Date:                $Date:  $
//   Revision:            $Revision: 1.3 $
//
// 



// System includes


// External includes 


// Project includes
#include "includes/define.h"
#include "geometries/triangle_2d_3.h"
#include "geometries/point_2d.h" 
#include "geometries/line_2d.h"
#include "flow_application.h"
#include "includes/variables.h"


namespace Kratos
{
	KRATOS_CREATE_VARIABLE(double, HEAD_LEVEL) // PERMEABILITY_WATER, DENSITY & CONCENTRATION ALREADY EXIST AT KERNEL
        KRATOS_CREATE_VARIABLE(double, SPECIFIC_STORAGE)
        KRATOS_CREATE_VARIABLE(double, FLOW_RATE)
        
        KRATOS_CREATE_VARIABLE(double, LEAKAGE_COEFFICIENT) 
        KRATOS_CREATE_VARIABLE(double, LEVEL)
        
        KRATOS_CREATE_VARIABLE(double, DARCY_FLOW_X)
        KRATOS_CREATE_VARIABLE(double, DARCY_FLOW_Y)
        KRATOS_CREATE_VARIABLE(double, DIFFUSION_COEFFICIENT)
        KRATOS_CREATE_VARIABLE(double, CONCENTRATION_EXTERN)
        
        
 	KratosFlowApplication::KratosFlowApplication(): //constructor  do not forget to add the ":" 
		
		mFlow2D    ( 0, Element::GeometryType::Pointer( new Triangle2D3<Node<3> >(  Element::GeometryType::PointsArrayType (3, Node<3>() ) ) ) ),
                mFlowTrans2D    ( 0, Element::GeometryType::Pointer( new Triangle2D3<Node<3> >(  Element::GeometryType::PointsArrayType (3, Node<3>() ) ) ) ),
                mPointSinkSource ( 0, Element::GeometryType::Pointer( new Point2D <Node<3>     >( Element::GeometryType::PointsArrayType (1, Node<3>() ) ) ) ),
                mLineSinkSource ( 0, Element::GeometryType::Pointer( new Line2D2<Node<3> >( Element::GeometryType::PointsArrayType( 2, Node<3>() ) ) ) ),
                mTriangleSinkSource ( 0, Element::GeometryType::Pointer( new Triangle2D3<Node<3> >(  Element::GeometryType::PointsArrayType (3, Node<3>() ) ) ) ),
                mPointLeakage ( 0, Element::GeometryType::Pointer( new Point2D <Node<3>     >( Element::GeometryType::PointsArrayType (1, Node<3>() ) ) ) ),
                mLineLeakage ( 0, Element::GeometryType::Pointer( new Line2D2<Node<3> >( Element::GeometryType::PointsArrayType( 2, Node<3>() ) ) ) ),
                mTriangleLeakage ( 0, Element::GeometryType::Pointer( new Triangle2D3<Node<3> >(  Element::GeometryType::PointsArrayType (3, Node<3>() ) ) ) )
                {}      
        
	void KratosFlowApplication::Register()
	{
		// calling base class register to register Kratos components
		KratosApplication::Register();
		std::cout << "Initializing KratosFlowApplication... " << std::endl;

                KRATOS_REGISTER_VARIABLE(  HEAD_LEVEL )
                KRATOS_REGISTER_VARIABLE(  SPECIFIC_STORAGE )
		KRATOS_REGISTER_VARIABLE(  FLOW_RATE )
                        
                KRATOS_REGISTER_VARIABLE( LEAKAGE_COEFFICIENT )
                KRATOS_REGISTER_VARIABLE( LEVEL )
                        
                KRATOS_REGISTER_VARIABLE( DARCY_FLOW_X )
                KRATOS_REGISTER_VARIABLE( DARCY_FLOW_Y )
                KRATOS_REGISTER_VARIABLE( DIFFUSION_COEFFICIENT )
                KRATOS_REGISTER_VARIABLE( CONCENTRATION_EXTERN )

                

		// Registering elements and conditions here
		KRATOS_REGISTER_ELEMENT("Flow2D", mFlow2D);  //and here is our element
                KRATOS_REGISTER_ELEMENT("FlowTrans2D", mFlowTrans2D);  //and here is our element
                KRATOS_REGISTER_CONDITION( "PointSinkSource", mPointSinkSource ); //condition 1
                KRATOS_REGISTER_CONDITION("LineSinkSource", mLineSinkSource);  //condition 2
                KRATOS_REGISTER_CONDITION( "TriangleSinkSource", mTriangleSinkSource ); //condition 3
                KRATOS_REGISTER_CONDITION( "PointLeakage", mPointLeakage ); //condition 4
                KRATOS_REGISTER_CONDITION("LineLeakage", mLineLeakage);  //condition 5
                KRATOS_REGISTER_CONDITION( "TriangleLeakage", mTriangleLeakage ); //condition 6
                



	}


}  // namespace Kratos.

